<!doctype html>
<html lang="fr">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>GameHub Arcade Pro â€” Plateforme de Jeux Sociale</title>
  <meta name="description" content="Jouez, chattez et affrontez vos amis sur GameHub Arcade Pro. Classements, multijoueur, chat temps rÃ©el.">
  <link rel="stylesheet" href="styles.css">
  <link rel="manifest" href="manifest.json">
  <link rel="preconnect" href="https://fonts.googleapis.com">
  <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
  <meta name="theme-color" content="#667eea">
  <link rel="apple-touch-icon" href="icon-192.png">
</head>
<body>
  <!-- Animated background particles -->
  <div id="particles"></div>
  
  <header>
    <div class="header-left">
      <h1>ğŸ® GameHub Arcade Pro</h1>
      <div class="header-stats">
        <span id="online-count" class="stat-badge">ğŸ‘¥ 0 en ligne</span>
      </div>
    </div>
    
    <div id="user-info">
      <span class="status-dot"></span>
      <span class="status-text">Chargement...</span>
      <div class="user-actions hidden" id="user-actions">
        <button id="friends-btn" class="action-btn" title="Amis">
          ğŸ‘¥ Amis
          <span class="badge hidden" id="friend-requests-badge">0</span>
        </button>
        <button id="chat-btn" class="action-btn" title="Messages">
          ğŸ’¬ Chat
          <span class="badge hidden" id="chat-unread-badge">0</span>
        </button>
        <button id="notifications-btn" class="action-btn" title="Notifications">
          ğŸ””
          <span class="badge hidden" id="notifications-badge">0</span>
        </button>
        <button id="profile-btn" class="action-btn">ğŸ‘¤ Profil</button>
        <button id="logout-btn" class="logout-btn">DÃ©connexion</button>
      </div>
    </div>
  </header>

  <main>
    <nav class="games-list">
      <div class="games-header">
        <h2>ğŸ¯ Jeux Disponibles</h2>
        <div class="games-filter">
          <button class="filter-btn active" data-filter="all">Tous</button>
          <button class="filter-btn" data-filter="favorite">â­ Favoris</button>
          <button class="filter-btn" data-filter="pinned">ğŸ“Œ Ã‰pinglÃ©s</button>
        </div>
      </div>
      
      <button data-game="guess" class="game-card">
        <div class="game-icon">ğŸ¯</div>
        <div class="game-info">
          <h3>Devine le nombre</h3>
          <p>Logique & dÃ©duction</p>
        </div>
        <div class="game-actions">
          <button class="game-action-btn favorite-btn" title="Ajouter aux favoris">â­</button>
          <button class="game-action-btn pin-btn" title="Ã‰pingler">ğŸ“Œ</button>
        </div>
      </button>
      
      <button data-game="memory" class="game-card">
        <div class="game-icon">ğŸ§ </div>
        <div class="game-info">
          <h3>Memory</h3>
          <p>MÃ©moire & concentration</p>
        </div>
        <div class="game-actions">
          <button class="game-action-btn favorite-btn" title="Ajouter aux favoris">â­</button>
          <button class="game-action-btn pin-btn" title="Ã‰pingler">ğŸ“Œ</button>
        </div>
      </button>
      
      <button data-game="tictactoe" class="game-card">
        <div class="game-icon">âš”ï¸</div>
        <div class="game-info">
          <h3>Morpion</h3>
          <p>StratÃ©gie & multijoueur</p>
        </div>
        <div class="game-actions">
          <button class="game-action-btn favorite-btn" title="Ajouter aux favoris">â­</button>
          <button class="game-action-btn pin-btn" title="Ã‰pingler">ğŸ“Œ</button>
        </div>
      </button>
    </nav>

    <section id="game-area">
      <div class="welcome-screen">
        <div class="welcome-animation">
          <div class="floating-icon">ğŸ²</div>
          <h2>Bienvenue sur GameHub Arcade Pro !</h2>
          <p>SÃ©lectionne un jeu pour commencer ton aventure.</p>
          <p class="feature-highlight">âœ¨ Nouveau : SystÃ¨me d'amis, chat en temps rÃ©el et classements avancÃ©s !</p>
        </div>
      </div>
    </section>

    <aside id="leaderboard">
      <div class="leaderboard-header">
        <h2>ğŸ† Classements</h2>
        <button class="leaderboard-settings-btn" id="leaderboard-settings">âš™ï¸</button>
        <button class="refresh-btn" id="refresh-leaderboard">â†»</button>
      </div>
      
      <div class="leaderboard-filters" id="leaderboard-filters">
        <div class="filter-group">
          <label>PÃ©riode</label>
          <select id="period-filter" class="filter-select">
            <option value="all">Tout le temps</option>
            <option value="daily">Aujourd'hui</option>
            <option value="weekly">Cette semaine</option>
            <option value="monthly">Ce mois</option>
            <option value="yearly">Cette annÃ©e</option>
          </select>
        </div>
        
        <div class="filter-group">
          <label>Vue</label>
          <select id="scope-filter" class="filter-select">
            <option value="global">Global</option>
            <option value="friends">Amis uniquement</option>
          </select>
        </div>
        
        <div class="filter-group">
          <input type="text" id="player-search" class="filter-input" placeholder="ğŸ” Rechercher un joueur...">
        </div>
      </div>
      
      <div id="boards">
        <div class="loading-animation">
          <div class="spinner"></div>
          <span>Chargement des scores...</span>
        </div>
      </div>
    </aside>
  </main>

  <footer>
    <div class="footer-content">
      <span>âœ¨ GameHub Arcade Pro â€¢ Firebase + GitHub Pages</span>
      <button id="install-btn" class="install-btn hidden">ğŸ“± Installer l'app</button>
    </div>
  </footer>

  <!-- Firebase (compat libs) -->
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-app-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-auth-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-database-compat.js"></script>
  <script src="https://www.gstatic.com/firebasejs/9.22.2/firebase-storage-compat.js"></script>

  <!-- App modules -->
  <script src="config.js" type="module"></script>
  <script src="app.js" type="module"></script>
  <script src="moderation.js" type="module"></script>
  <script src="friends.js" type="module"></script>
  <script src="chat.js" type="module"></script>
  <script src="admin.js" type="module"></script>
  <script src="leaderboard.js" type="module"></script>
  
  <!-- Game modules -->
  <script src="games/guess.js" type="module"></script>
  <script src="games/memory.js" type="module"></script>
  <script src="games/tictactoe.js" type="module"></script>

  <!-- Service Worker for PWA -->
  <script>
    if ('serviceWorker' in navigator) {
      window.addEventListener('load', () => {
        navigator.serviceWorker.register('sw.js')
          .then(reg => console.log('âœ… Service Worker registered'))
          .catch(err => console.log('âŒ Service Worker registration failed', err));
      });
    }
    
    // Install prompt
    let deferredPrompt;
    window.addEventListener('beforeinstallprompt', (e) => {
      e.preventDefault();
      deferredPrompt = e;
      document.getElementById('install-btn').classList.remove('hidden');
    });
    
    document.getElementById('install-btn').addEventListener('click', async () => {
      if (deferredPrompt) {
        deferredPrompt.prompt();
        const { outcome } = await deferredPrompt.userChoice;
        console.log(`User response: ${outcome}`);
        deferredPrompt = null;
        document.getElementById('install-btn').classList.add('hidden');
      }
    });
  </script>
</body>
</html>
